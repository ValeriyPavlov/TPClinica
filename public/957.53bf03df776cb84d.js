"use strict";(self.webpackChunkTPClinica=self.webpackChunkTPClinica||[]).push([[957],{9897:(g,f,s)=>{s.d(f,{Jc:()=>e,Pf:()=>h,n7:()=>p});class h{constructor(){this.duration=0}}var p=function(l){return l.Lunes="lunes",l.Martes="martes",l.Miercoles="mi\xe9rcoles",l.Jueves="jueves",l.Viernes="viernes",l.Sabado="s\xe1bado",l.Domingo="domingo",l}(p||{});class e{constructor(m){this.dayOfWeek=m?.dayOfWeek,this.date=m?.date,this.timeStart=m?.timeStart,this.timeEnd=m?.timeEnd}}},4957:(g,f,s)=>{s.r(f),s.d(f,{MyProfileModule:()=>M});var h=s(6814),p=s(6024),e=s(9468),l=s(563),m=s(5861),r=s(95),a=s(9897),v=s(3251);function S(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",26)(1,"label",27),e._uU(2),e.qZA(),e.TgZ(3,"input",28),e.NdJ("change",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.selectDay(n))}),e.qZA()()}if(2&i){const t=u.$implicit;e.xp6(1),e.s9C("for",t),e.xp6(1),e.Oqu(t),e.xp6(1),e.s9C("id",t),e.s9C("value",t)}}function y(i,u){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=u.$implicit;e.xp6(1),e.Oqu(t)}}function Z(i,u){if(1&i&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&i){const t=u.$implicit;e.xp6(1),e.Oqu(t)}}let w=(()=>{class i{constructor(t,o,n){this.formBuilder=t,this.uService=o,this.aService=n,this.eventShowSchedule=new e.vpe,this.selectedDays=[],this.showSchedule=!1,this.schedule=new a.Pf,this.possibleDaysOfWeek=[a.n7.Lunes,a.n7.Martes,a.n7.Miercoles,a.n7.Jueves,a.n7.Viernes,a.n7.Sabado],this.possibleTimes=[8,9,10,11,12,13,14,15,16,17,18,19],this.formSchedule=this.formBuilder.group({days:["",r.kI.required],timeStart:["",r.kI.required],timeEnd:["",r.kI.required],duration:["",r.kI.required]})}return(){this.showSchedule=!this.showSchedule,this.eventShowSchedule.emit(this.showSchedule)}selectDay(t){const o=t.target;if(o.checked)this.selectedDays.push(o.value);else{const n=this.selectedDays.findIndex(c=>c===o.value);n>-1&&this.selectedDays.splice(n,1)}0===this.selectedDays.length&&this.formSchedule.controls.days.reset()}register(){var t=this;return(0,m.Z)(function*(){if(t.formSchedule.valid)try{t.timeValidator();const o=t.uService.userLogged;t.createSchedule(o.speciality),o.speciality.schedule=t.schedule,yield t.uService.saveUserWithIdInStore(o.userId,o),yield t.aService.showAlert({icon:"success",message:"Horarios cargados exitosamente.",timer:2e3}),t.selectedDays=[],t.formSchedule.reset({timeStart:"Elija una opcion",timeEnd:"Elija una opcion"})}catch(o){yield t.aService.showAlert({icon:"error",message:o.message,timer:2e3})}else yield t.aService.showAlert({icon:"error",message:"Complete todos los campos!",timer:2e3})})()}timeValidator(){if(parseInt(this.formSchedule.value.timeStart)>=parseInt(this.formSchedule.value.timeEnd))throw new Error("El horario de inicio no puede ser mayor o igual que el de finalizacion.");if(this.selectedDays.includes(a.n7.Sabado)&&parseInt(this.formSchedule.value.timeEnd)>14)throw new Error("El horario laboral para los dias sabados es hasta las 14 hs.")}createSchedule(t){let o=[];null!=t.schedule.days&&t.schedule.days.forEach(n=>{o.push(n)}),this.selectedDays.forEach(n=>{let c=o?.find(d=>d.dayOfWeek===n);if(null!=c)c.timeStart=this.formSchedule.value.timeStart,c.timeEnd=this.formSchedule.value.timeEnd;else{let d=new a.Jc;d.dayOfWeek=n,d.timeStart=this.formSchedule.value.timeStart,d.timeEnd=this.formSchedule.value.timeEnd,o.push(d)}}),this.schedule.days=o,this.schedule.duration=parseFloat(this.formSchedule.value.duration)}resetSchedule(){var t=this;return(0,m.Z)(function*(){let o=new a.Pf;const n=t.uService.userLogged;yield t.aService.showAlert({icon:"warning",message:"Esta seguro que desea reestablecer su disponibilidad? Cancelara todos sus turnos.",showCancelButton:!0,showConfirmButton:!0}).then(function(){var c=(0,m.Z)(function*(d){d.isConfirmed&&(n.speciality.schedule=o,yield t.uService.saveUserWithIdInStore(n.userId,n),yield t.aService.showAlert({icon:"success",message:"Horarios reestablecidos exitosamente.",timer:2e3}))});return function(d){return c.apply(this,arguments)}}())})()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(r.qu),e.Y36(l.K),e.Y36(v.c))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-schedule"]],inputs:{showSchedule:"showSchedule"},outputs:{eventShowSchedule:"eventShowSchedule"},decls:46,vars:4,consts:[[1,"w-100","m-0","p-1","h-100","row","justify-content-center","align-items-center"],[1,"bg-light","shadow","p-1","rounded","col-lg-4","col-md-5","col-sm-8"],[1,"w-100","row","justify-content-center","justify-content-sm-start","p-2"],["title","Volver",1,"col-md-3","col-2","btn","btn-warning",3,"click"],[1,"fa-solid","fa-circle-arrow-left"],[1,"row","w-100","justify-content-center","align-items-center"],[1,"text-center"],["src","../../../../assets/img/icono.png","alt","register_paciente",1,"col-3","mt-1"],[1,"p-3",3,"formGroup","ngSubmit"],[1,"row","mt-4","g-3","justify-content-center"],[1,"col-12"],[1,"fw-bold"],["class","form-check form-switch",4,"ngFor","ngForOf"],[1,"row","mt-1","g-3","justify-content-center"],[1,"col-sm-6"],["for","horainicio",1,"form-label"],["formControlName","timeStart","id","horafin",1,"form-select"],["value","","disabled","","selected",""],[4,"ngFor","ngForOf"],["for","horafin",1,"form-label"],["formControlName","timeEnd","id","horafin",1,"form-select"],["formControlName","duration","id","duration",1,"form-select"],["value","0.5"],["value","1"],[1,"mt-3","w-100","btn","btn-lg","btn-outline-success","btn-block"],["type","button","value","Reestablecer disponibilidad",1,"mt-3","w-100","btn","btn-lg","btn-outline-danger","btn-block",3,"click"],[1,"form-check","form-switch"],[1,"form-check-label",3,"for"],["type","checkbox","formControlName","days",1,"form-check-input",3,"id","value","change"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.return()}),e._UZ(4,"i",4),e.qZA()(),e.TgZ(5,"div",5)(6,"h2",6),e._uU(7,"Disponibilidad Horaria"),e.qZA(),e._UZ(8,"img",7),e.qZA(),e.TgZ(9,"form",8),e.NdJ("ngSubmit",function(){return n.register()}),e.TgZ(10,"div",9)(11,"div",10)(12,"p",11),e._uU(13,"Elija los dias disponibles:"),e.qZA(),e.YNc(14,S,4,4,"div",12),e.qZA()(),e.TgZ(15,"div",13)(16,"p",11),e._uU(17,"Elija el rango de horarios:"),e.qZA(),e.TgZ(18,"div",14)(19,"label",15),e._uU(20,"Hora de Inicio:"),e.qZA(),e.TgZ(21,"select",16)(22,"option",17),e._uU(23,"Elija una opcion"),e.qZA(),e.YNc(24,y,2,1,"option",18),e.qZA()(),e.TgZ(25,"div",14)(26,"label",19),e._uU(27,"Hora de Fin:"),e.qZA(),e.TgZ(28,"select",20)(29,"option",17),e._uU(30,"Elija una opcion"),e.qZA(),e.YNc(31,Z,2,1,"option",18),e.qZA()()(),e.TgZ(32,"div",9)(33,"div",10)(34,"p",11),e._uU(35,"Elija la duracion de los turnos:"),e.qZA(),e.TgZ(36,"select",21)(37,"option",17),e._uU(38,"Elija una opcion"),e.qZA(),e.TgZ(39,"option",22),e._uU(40,"30 Minutos"),e.qZA(),e.TgZ(41,"option",23),e._uU(42,"60 Minutos"),e.qZA()()()(),e.TgZ(43,"button",24),e._uU(44,"Registrar disponibilidad"),e.qZA(),e.TgZ(45,"input",25),e.NdJ("click",function(){return n.resetSchedule()}),e.qZA()()()()),2&o&&(e.xp6(9),e.Q6J("formGroup",n.formSchedule),e.xp6(5),e.Q6J("ngForOf",n.possibleDaysOfWeek),e.xp6(10),e.Q6J("ngForOf",n.possibleTimes),e.xp6(7),e.Q6J("ngForOf",n.possibleTimes))},dependencies:[h.sg,r._Y,r.YN,r.Kr,r.Wl,r.EJ,r.JJ,r.JL,r.sg,r.u]})}return i})();var _=s(4212),b=s(3175),T=s(4553);function A(i,u){if(1&i&&(e.TgZ(0,"h5",12),e._uU(1),e.ALo(2,"keysToSpanish"),e.ALo(3,"booleans"),e.ALo(4,"speciality"),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,t.key),": ",e.lcZ(3,4,e.lcZ(4,6,t.value))," ")}}function x(i,u){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,A,5,8,"h5",11),e.qZA()),2&i){const t=u.$implicit;e.xp6(1),e.Q6J("ngIf",!t.key.startsWith("profilePhoto")&&"name"!=t.key&&"lastName"!=t.key&&"userRole"!=t.key)}}function C(i,u){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"img",7),e.TgZ(3,"div",8)(4,"h3"),e._uU(5),e.qZA(),e.TgZ(6,"h4"),e._uU(7),e.ALo(8,"uppercase"),e.qZA()()(),e.YNc(9,x,2,1,"div",9),e.ALo(10,"keyvalue"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.s9C("src",t.uService.userLogged.profilePhoto,e.LSH),e.xp6(3),e.AsE(" ",t.uService.userLogged.lastName,", ",t.uService.userLogged.name," "),e.xp6(2),e.hij(" (",e.lcZ(8,5,t.uService.userLogged.userRole),") "),e.xp6(2),e.Q6J("ngForOf",e.lcZ(10,7,t.uService.userLogged))}}function E(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showFormSchedule())}),e._uU(3,"Mis horarios"),e.qZA()(),e.TgZ(4,"div",15)(5,"app-schedule",16),e.NdJ("eventShowSchedule",function(n){e.CHM(t);const c=e.oxw();return e.KtG(c.handlerUpdateScheduleView(n))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("hidden",t.showSchedule),e.xp6(2),e.Q6J("hidden",!t.showSchedule),e.xp6(1),e.Q6J("showSchedule",t.showSchedule)}}const q=[{path:"",component:(()=>{class i{constructor(t){this.uService=t,this.showSchedule=!1}showFormSchedule(){this.showSchedule=!0}handlerUpdateScheduleView(t){this.showSchedule=t}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(l.K))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-my-profile"]],decls:5,vars:2,consts:[[1,"profile"],[1,"row","justify-content-center","h-100","m-5","p-2","align-items-center"],[1,"bg-light","shadow","p-1","rounded","col-lg-5","col-md-6","col-sm-8","card","mb-3",2,"max-width","800px"],["class","col g-0 align-items-center bg-beige",4,"ngIf"],[4,"ngIf"],[1,"col","g-0","align-items-center","bg-beige"],[1,"d-flex","flex-row","align-items-center","justify-content-center"],["alt","fotoPerfil",1,"img-fluid","rounded-start","m-1","p-1",3,"src"],[1,"d-flex","align-items-center","justify-content-center","flex-column"],["class","d-flex flex-column justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],["class","m-2 p-2",4,"ngIf"],[1,"m-2","p-2"],[1,"d-flex","align-items-center","justify-content-center"],[1,"btn","btn-warning",3,"hidden","click"],[3,"hidden"],[3,"showSchedule","eventShowSchedule"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"article",1)(2,"div",2),e.YNc(3,C,11,9,"div",3),e.qZA(),e.YNc(4,E,6,3,"div",4),e.qZA()()),2&o&&(e.xp6(3),e.Q6J("ngIf",n.uService.userLogged),e.xp6(1),e.Q6J("ngIf","especialista"==(null==n.uService.userLogged?null:n.uService.userLogged.userRole)))},dependencies:[h.sg,h.O5,w,h.gd,h.Nd,_.x,b.U,T.t],styles:[".bg-beige[_ngcontent-%COMP%]{background-color:beige}"]})}return i})()}];let U=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(q),p.Bz]})}return i})();var J=s(103);let M=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[h.ez,r.UX,U,J.D]})}return i})()}}]);