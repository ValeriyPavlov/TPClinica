"use strict";(self.webpackChunkTPClinica=self.webpackChunkTPClinica||[]).push([[115],{8572:(T,p,s)=>{s.r(p),s.d(p,{PatientsModule:()=>S});var c=s(6814),f=s(6024),h=s(5861),t=s(9468),g=s(9547),v=s(3251),d=s(8672),A=s(5710),a=s(8642);function r(i,Z){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",12),t._uU(4),t.qZA(),t.TgZ(5,"td",12),t._uU(6),t.qZA(),t.TgZ(7,"td",12),t._uU(8),t.qZA(),t.TgZ(9,"td",12),t._uU(10),t.qZA(),t.TgZ(11,"td",12),t._uU(12),t.qZA(),t.TgZ(13,"td",12),t._uU(14),t.qZA(),t.TgZ(15,"td",12),t._UZ(16,"img",13),t.qZA(),t.TgZ(17,"td",12)(18,"button",14),t.NdJ("click",function(){const _=t.CHM(e).$implicit,y=t.oxw(2);return t.KtG(y.selectUser(_))}),t._uU(19,"Historial"),t.qZA()()()}if(2&i){const e=Z.$implicit;t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.lastName," "),t.xp6(2),t.hij(" ",e.dni," "),t.xp6(2),t.hij(" ",e.age," "),t.xp6(2),t.hij(" ",e.userId," "),t.xp6(2),t.hij(" ",e.email," "),t.xp6(2),t.hij(" ",e.socialWork," "),t.xp6(2),t.s9C("src",e.profilePhoto,t.LSH)}}function l(i,Z){if(1&i&&(t.TgZ(0,"table",7)(1,"thead",8)(2,"tr")(3,"th",9),t._uU(4," Nombre "),t.qZA(),t.TgZ(5,"th",9),t._uU(6," Apellido "),t.qZA(),t.TgZ(7,"th",9),t._uU(8," DNI "),t.qZA(),t.TgZ(9,"th",9),t._uU(10," Edad "),t.qZA(),t.TgZ(11,"th",9),t._uU(12," ID "),t.qZA(),t.TgZ(13,"th",9),t._uU(14," Email "),t.qZA(),t.TgZ(15,"th",9),t._uU(16," Obra Social "),t.qZA(),t.TgZ(17,"th",9),t._uU(18," Foto "),t.qZA(),t.TgZ(19,"th",9),t._uU(20,"Accion"),t.qZA()()(),t.TgZ(21,"tbody",10),t.YNc(22,r,20,8,"tr",11),t.qZA()()),2&i){const e=t.oxw();t.xp6(22),t.Q6J("ngForOf",e.list)}}function u(i,Z){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",15),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.return())}),t._UZ(2,"i",16),t._uU(3,"Volver "),t.qZA(),t.TgZ(4,"div",17)(5,"h3",18),t._uU(6,"Historial Cl\xednico de"),t.qZA(),t.TgZ(7,"h3",9),t._uU(8),t.qZA()(),t._UZ(9,"app-history",19),t.qZA()}if(2&i){const e=t.oxw();t.xp6(8),t.AsE(" ",e.selectedUser.lastName,", ",e.selectedUser.name,""),t.xp6(1),t.Q6J("selectedUser",e.selectedUser)}}const U=[{path:"",component:(()=>{class i{constructor(e,o,n,_){this.userService=e,this.alertService=o,this.sService=n,this.aService=_,this.eventSendUser=new t.vpe,this.eventShowTable=new t.vpe,this.showTable=!0,this.hideMedicalRecord=!0,this.myAppointments=[],this.list=[],this.listOfAppointments=[]}ngOnInit(){this.getAllAppointments(),this.ref=this.aService.getAllAppointments().subscribe(e=>{this.listOfAppointments=e,this.myAppointments=this.aService.appointments.filter(n=>n.specialist.userId==this.userService.userLogged?.userId&&"Realizado"==n.state);let o={};this.myAppointments=this.myAppointments.filter(n=>!o[n.patient.userId]&&(o[n.patient.userId]=!0,!0)),this.myAppointments.map(n=>{this.list?.push(n.patient)}),this.unsub()},e=>{console.error("Error al obtener datos:",e)})}unsub(){this.ref.unsubscribe()}getAllAppointments(){var e=this;return(0,h.Z)(function*(){yield e.aService.getAppointments()})()}return(){this.showTable=!this.showTable}selectUser(e){this.selectedUser=e,this.showTable=!this.showTable}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(g.K),t.Y36(v.c),t.Y36(d.t2),t.Y36(A.H))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-patients"]],inputs:{roleOption:"roleOption",showTable:"showTable"},outputs:{eventSendUser:"eventSendUser",eventShowTable:"eventShowTable"},decls:9,vars:4,consts:[[1,"h-100","p-4",3,"hidden"],[1,"w-100","row","justify-content-center","justify-content-sm-start","p-2","m-0"],[1,"table-responsive"],[1,"d-flex","align-items-center","justify-content-center"],["class","table table-striped table-ligth",4,"ngIf"],[3,"hidden"],[4,"ngIf"],[1,"table","table-striped","table-ligth"],[1,"table-dark"],[1,"text-center","fw-bold"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"text-center"],["alt","foto_perfil",1,"img-fluid","rounded","rounded-3",2,"height","50px","width","50px",3,"src"],[1,"btn","btn-warning",2,"width","80px","height","35px",3,"click"],["title","Volver",1,"col-sm-1","col-md-2","col-8","btn","btn-warning","m-2","p-2",3,"click"],[1,"fa-solid","fa-circle-arrow-left"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"text-center",2,"padding-right","15px"],[3,"selectedUser"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"Pacientes:"),t.qZA()(),t.YNc(6,l,23,1,"table",4),t.qZA()(),t.TgZ(7,"div",5),t.YNc(8,u,10,3,"div",6),t.qZA()),2&o&&(t.Q6J("hidden",!n.showTable),t.xp6(6),t.Q6J("ngIf",n.list),t.xp6(1),t.Q6J("hidden",n.showTable),t.xp6(1),t.Q6J("ngIf",null!=n.selectedUser))},dependencies:[c.sg,c.O5,a.u]})}return i})()}];let b=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(U),f.Bz]})}return i})();var x=s(103),P=s(6710);let S=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[c.ez,b,x.D,P.H]})}return i})()},6084:(T,p,s)=>{s.d(p,{d:()=>v});var c=s(5861),f=s(4036),h=s(9468),t=s(3384),g=s(388);let v=(()=>{class d{constructor(a,r){this.firebaseStoreProvider=a,this.firebaseStorageProvider=r}getAllSpecialities(){var a=this;return(0,c.Z)(function*(){let r=yield(0,f.z)(a.firebaseStoreProvider.getCollection("specialities"));return r=yield Promise.all(r.map(function(){var l=(0,c.Z)(function*(u){return{...u,image:yield a.getSpecialityPhoto(u)}});return function(u){return l.apply(this,arguments)}}())),r})()}addSpeciality(a){var r=this;return(0,c.Z)(function*(){let l=!1;if((yield r.getAllSpecialities()).forEach(m=>{m.description==a.description&&(l=!0)}),!l){const m=r.firebaseStoreProvider.createDoc("specialities");return r.firebaseStoreProvider.saveDoc(m,JSON.parse(JSON.stringify(a)))}})()}getSpecialityPhoto(a){var r=this;return(0,c.Z)(function*(){try{const l=r.firebaseStorageProvider.referenceCloudStorage(a.image);return yield r.firebaseStorageProvider.getUrlFromFile(l)}catch{}})()}static#t=this.\u0275fac=function(r){return new(r||d)(h.LFG(t.f),h.LFG(g.O))};static#e=this.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);