"use strict";(self.webpackChunkTPClinica=self.webpackChunkTPClinica||[]).push([[355],{4355:(ie,m,r)=>{r.r(m),r.d(m,{UsersModule:()=>ne});var a=r(6814),u=r(6024),_=r(5861),c=r(6825),e=r(9468),h=r(7615),f=r(5710),g=r(3251),b=r(951),T=r(8642),p=r(8672),U=r(4212),v=r(3175);let x=(()=>{class t{transform(n){return n}static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275pipe=e.Yjl({name:"specialist",type:t,pure:!0})}return t})();var Z=r(4553);function w(t,o){if(1&t&&(e.TgZ(0,"th",14),e._uU(1),e.ALo(2,"uppercase"),e.ALo(3,"keysToSpanish"),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,n.key))," ")}}function A(t,o){1&t&&(e.TgZ(0,"th"),e._uU(1,"Accion"),e.qZA())}function C(t,o){1&t&&e._UZ(0,"td",19)}function y(t,o){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"speciality"),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.value)," ")}}function S(t,o){}function k(t,o){1&t&&e.YNc(0,S,0,0,"ng-template")}function O(t,o){if(1&t&&e._UZ(0,"img",26),2&t){const n=e.oxw(2).$implicit;e.s9C("src",n.value,e.LSH)}}function N(t,o){if(1&t&&(e._uU(0),e.ALo(1,"booleans")),2&t){const n=e.oxw(2).$implicit;e.Oqu(e.lcZ(1,1,n.value))}}function J(t,o){if(1&t&&(e.YNc(0,k,1,0,null,23),e.YNc(1,O,1,1,"ng-template",null,24,e.W1O),e.YNc(3,N,2,3,"ng-template",null,25,e.W1O)),2&t){const n=e.MAs(2),s=e.MAs(4),i=e.oxw().$implicit;e.Q6J("ngIf",i.key.startsWith("profilePh"))("ngIfThen",n)("ngIfElse",s)}}function I(t,o){if(1&t&&(e.TgZ(0,"td",19),e.YNc(1,y,3,3,"div",21),e.YNc(2,J,5,3,"ng-template",null,22,e.W1O),e.qZA()),2&t){const n=o.$implicit,s=e.MAs(3);e.xp6(1),e.Q6J("ngIf","speciality"===n.key)("ngIfElse",s)}}function Y(t,o){if(1&t&&(e.YNc(0,I,4,2,"td",20),e.ALo(1,"keyvalue"),e.ALo(2,"specialist")),2&t){const n=e.oxw().$implicit;e.Q6J("ngForOf",e.lcZ(1,1,e.lcZ(2,3,n)))}}function M(t,o){}function F(t,o){1&t&&e.YNc(0,M,0,0,"ng-template")}function E(t,o){if(1&t&&e._UZ(0,"img",29),2&t){const n=e.oxw().$implicit;e.s9C("src",n.value,e.LSH)}}function Q(t,o){if(1&t&&(e._uU(0),e.ALo(1,"booleans")),2&t){const n=e.oxw().$implicit;e.Oqu(e.lcZ(1,1,n.value))}}function P(t,o){if(1&t&&(e.TgZ(0,"td",19),e.YNc(1,F,1,0,null,23),e.YNc(2,E,1,1,"ng-template",null,27,e.W1O),e.YNc(4,Q,2,3,"ng-template",null,28,e.W1O),e.qZA()),2&t){const n=o.$implicit,s=e.MAs(3),i=e.MAs(5);e.xp6(1),e.Q6J("ngIf",n.key.startsWith("profilePh"))("ngIfThen",s)("ngIfElse",i)}}function H(t,o){if(1&t&&(e.YNc(0,P,6,3,"td",20),e.ALo(1,"keyvalue")),2&t){const n=e.oxw().$implicit;e.Q6J("ngForOf",e.lcZ(1,1,n))}}function $(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"i",32),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit,l=e.oxw(2);return e.KtG(l.validateSpecialist(i))}),e._UZ(1,"img",33),e.qZA()}}function j(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"i",34),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2).$implicit,l=e.oxw(2);return e.KtG(l.validateSpecialist(i))}),e._UZ(1,"img",35),e.qZA()}}function L(t,o){if(1&t&&(e.TgZ(0,"td",19),e.YNc(1,$,2,0,"i",30),e.ALo(2,"specialist"),e.YNc(3,j,2,0,"i",31),e.ALo(4,"specialist"),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(2,2,n).verifiedByAdmin),e.xp6(2),e.Q6J("ngIf",!0===e.lcZ(4,4,n).verifiedByAdmin)}}function q(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"td",19)(1,"button",36),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw(2);return e.KtG(l.selectUser(i))}),e._uU(2,"Historial"),e.qZA()()}}function B(t,o){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,C,1,0,"td",15),e.YNc(2,Y,3,5,"ng-template",null,16,e.W1O),e.YNc(4,H,2,3,"ng-template",null,17,e.W1O),e.YNc(6,L,5,6,"td",18),e.YNc(7,q,3,0,"td",18),e.qZA()),2&t){const n=e.MAs(3),s=e.MAs(5),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","especialista"===i.roleOption)("ngIfThen",n)("ngIfElse",s),e.xp6(5),e.Q6J("ngIf","especialista"===i.roleOption),e.xp6(1),e.Q6J("ngIf","paciente"===i.roleOption)}}function R(t,o){if(1&t&&(e.TgZ(0,"table",8)(1,"thead",9)(2,"tr"),e.YNc(3,w,4,5,"th",10),e.ALo(4,"keyvalue"),e.YNc(5,A,2,0,"th",11),e.qZA()(),e.TgZ(6,"tbody",12),e.YNc(7,B,8,5,"tr",13),e.qZA()()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,3,n.list[0])),e.xp6(2),e.Q6J("ngIf","admin"!==n.roleOption),e.xp6(2),e.Q6J("ngForOf",n.list)}}let W=(()=>{class t{constructor(n,s,i,l){this.userService=n,this.alertService=s,this.sService=i,this.aService=l,this.eventSendUser=new e.vpe,this.eventShowTable=new e.vpe,this.showTable=!0,this.hideMedicalRecord=!0,this.myAppointments=[]}return(){this.showTable=!this.showTable,this.eventShowTable.emit(this.showTable)}validateSpecialist(n){var s=this;return(0,_.Z)(function*(){try{s.sService.show();const i=yield s.userService.authorizeSpecialistByAdmin(n);s.sService.hide(),i?yield s.alertService.showAlert({icon:"success",message:"Especialista habilitado con exito",timer:2e3}):yield s.alertService.showAlert({icon:"success",message:"Especialista inhabilitado con exito",timer:2e3})}catch(i){yield s.alertService.showAlert({icon:"error",message:i.message,timer:2e3})}})()}returnToTable(){}selectUser(n){this.eventSendUser.emit(n)}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(h.K),e.Y36(g.c),e.Y36(p.t2),e.Y36(f.H))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-table"]],inputs:{list:"list",roleOption:"roleOption",showTable:"showTable"},outputs:{eventSendUser:"eventSendUser",eventShowTable:"eventShowTable"},decls:8,vars:2,consts:[["type","ball-scale-multiple"],["src","../../../../assets/img/loader.gif","alt",""],[1,"h-100","p-4",3,"hidden"],[1,"w-100","row","justify-content-center","justify-content-sm-start","p-2","m-0"],["title","Volver",1,"col-sm-1","col-md-2","col-8","btn","btn-warning",3,"click"],[1,"fa-solid","fa-circle-arrow-left"],[1,"table-responsive"],["class","table table-striped table-ligth",4,"ngIf"],[1,"table","table-striped","table-ligth"],[1,"table-dark"],["class","text-center fw-bold",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"text-center","fw-bold"],["class","text-center",4,"ngIf","ngIfThen","ngIfElse"],["thenEspecialistBlock",""],["elseEspcialistBlock",""],["class","text-center",4,"ngIf"],[1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseSpecialityBlock",""],[4,"ngIf","ngIfThen","ngIfElse"],["thenProfilePhoto",""],["elseProfilePhoto",""],["alt","foto_perfil",1,"img-fluid","rounded","rounded-3",3,"src"],["thenElseEspcialistBlockProfilePhoto",""],["elseElseEspcialistBlockProfilePhoto",""],["alt","foto_perfil",1,"p-1","img-fluid","rounded","rounded-3",3,"src"],["title","Habilitar","class","btn btn-outline-success",3,"click",4,"ngIf"],["title","Inhabilitar","class","btn btn-outline-danger",3,"click",4,"ngIf"],["title","Habilitar",1,"btn","btn-outline-success",3,"click"],["src","../../../../assets/img/check.png","alt","Habilitar",2,"width","35px","height","35px"],["title","Inhabilitar",1,"btn","btn-outline-danger",3,"click"],["src","../../../../assets/img/cross.png","alt","Inhabilitar",2,"width","35px","height","35px"],[1,"btn","btn-warning",2,"width","80px","height","35px",3,"click"]],template:function(s,i){1&s&&(e.TgZ(0,"ngx-spinner",0),e._UZ(1,"img",1),e.qZA(),e.TgZ(2,"section",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.return()}),e._UZ(5,"i",5),e.qZA()(),e.TgZ(6,"div",6),e.YNc(7,R,8,5,"table",7),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("hidden",i.showTable),e.xp6(5),e.Q6J("ngIf",i.list))},dependencies:[a.sg,a.O5,p.Ro,a.gd,a.Nd,U.x,v.U,x,Z.t],styles:["@media (min-width: 1000px){img[_ngcontent-%COMP%]{width:64px;height:64px}}"]})}return t})();function D(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"button",30),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.dowloadOneAsExcel(i))}),e._UZ(2,"img",31),e.TgZ(3,"h5"),e._uU(4),e.qZA()()()}if(2&t){const n=e.oxw().$implicit;e.xp6(2),e.s9C("src",n.profilePhoto,e.LSH),e.xp6(2),e.AsE("",n.lastName,", ",n.name,"")}}function K(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,D,5,3,"div",29),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("ngIf","admin"!=n.userRole)}}const V=(0,c.X$)("slideInDown",[(0,c.eR)(":enter",[(0,c.oB)({transform:"translateY(-100%)"}),(0,c.jt)("750ms ease-out",(0,c.oB)({transform:"translateY(0)"}))]),(0,c.eR)(":leave",[(0,c.jt)("500ms ease-out",(0,c.oB)({transform:"translateY(-100%)"}))])]),z=[{path:"",component:(()=>{class t{constructor(n,s,i){this.userService=n,this.aService=s,this.alertService=i,this.userService.getUsers(),this.setListOfUsers(),this.listUsers=this.userService.users,this.showTable=!0,this.hiddenMain=!1,this.hiddenHistory=!0,this.hiddenUsers=!0,this.selectedUserAppointments=[],this.aService.getAppointments()}chooseListOption(n){var s=this;return(0,_.Z)(function*(){s.userOption=n,s.listFiltered=s.userService.users?.filter(i=>i.userRole===n),s.showTable=!s.showTable,s.listChoseOption=n})()}setListOfUsers(){var n=this;return(0,_.Z)(function*(){yield n.userService.getUsers()})()}activateCreateUsers(){this.showCreateUsers=!0}return(){this.showCreateUsers=!1}handlerUpdateView(n){this.showTable=n}handleSelectUser(n){this.selectedUser=n,this.hiddenHistory=!1}returnFromHistory(){this.hiddenHistory=!0,this.hiddenMain=!1}downloadUsersAsExcel(){this.userService.exportUsersToXls(this.userService.users,"usuarios")}dowloadOneAsExcel(n){this.selectedUser=n,null!=this.selectedUser&&("paciente"==this.selectedUser.userRole?this.selectedUserAppointments=this.aService.appointments.filter(s=>s.patient.userId==this.selectedUser?.userId):"especialista"==this.selectedUser.userRole&&(this.selectedUserAppointments=this.aService.appointments.filter(s=>s.specialist.userId==this.selectedUser?.userId)),this.selectedUserAppointments.length>0?this.userService.exportUserToXls(this.selectedUserAppointments,this.selectedUser,`turnos_de_${this.selectedUser?.lastName}_${this.selectedUser.name}`):this.alertService.showAlert({icon:"error",message:"El usuario seleccionado NO tiene turnos para descargar.",timer:2e3})),this.selectedUser=void 0}selectUserToDownload(){this.hiddenMain=!0,this.hiddenUsers=!1,this.hiddenHistory=!0}returnToMain(){this.hiddenUsers=!0,this.hiddenHistory=!0,this.hiddenMain=!1}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(h.K),e.Y36(f.H),e.Y36(g.c))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-users"]],decls:49,vars:14,consts:[[3,"hidden"],[1,"justify-content-center","align-items-center"],["title","Volver",1,"btn","btn-warning","m-2","p-2",3,"click"],[1,"fa-solid","fa-circle-arrow-left"],[3,"selectedUser"],[1,"row","justify-content-end","w-100","p-0","m-0",3,"hidden"],[1,"p-5","mt-4","shadow","bg-body-tertiary","rounded-3"],[1,"container-fluid","py-5"],[1,"text-center","display-5","fw-bold"],[1,"row","justify-content-center","align-items-center","m-0","p-0","w-100",3,"hidden"],["title","Pacientes",1,"col-xxl-1","col-sm-2","col-6","m-1","p-3","btn","boton","rounded-circle",3,"click"],["src","../../../assets/img/paciente.jpg","alt","Pacientes",1,"card-img","img-fluid","rounded-circle"],["title","Especialistas",1,"col-xxl-1","col-sm-2","col-6","m-1","p-3","btn","boton","rounded-circle",3,"click"],["src","../../../assets/img/doctor.jpg","alt","Especialistas",1,"card-img","img-fluid","rounded-circle"],["title","Administradores",1,"col-xxl-1","col-sm-2","col-6","m-1","p-3","btn","boton","rounded-circle",3,"click"],["src","../../../assets/img/admin.png","alt","Administradores",1,"card-img","img-fluid","rounded-circle"],[1,"d-flex","flex-row","justify-content-center","align-items-center","p-2","m-2"],[1,"btn","boton2","m-1","p-1",3,"click"],["src","../../../assets/img/excel.png","alt","excel",2,"width","75px","height","50px"],[3,"list","showTable","roleOption","eventShowTable","eventSendUser"],[1,"w-100","row","justify-content-center","justify-content-sm-center","p-2","m-0"],["type","button","value","Comenzar",1,"col-sm-1","col-md-2","col-8","btn","boton2",3,"click"],[1,"mt-4","rounded-3",3,"hidden"],[1,"container-fluid"],["title","Salir del Alta",1,"col-sm-1","col-md-2","col-8","btn","btn-warning",3,"click"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"fw-bold",2,"text-decoration","underline","margin-bottom","50px"],["id","botones",1,"w-75","d-flex","flex-row","justify-content-center","align-items-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"m-1","p-3","d-flex","flex-column","align-items-center","justify-content-center","botonFab",2,"width","200px","height","200px",3,"click"],["alt","foto_paciente",1,"card-img","img-fluid","rounded-circle",2,"height","100px","width","100px",3,"src"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.returnFromHistory()}),e._UZ(3,"i",3),e._uU(4,"Volver"),e.qZA(),e._UZ(5,"app-history",4),e.qZA()(),e.TgZ(6,"section",5)(7,"div",6)(8,"div",7)(9,"h1",8),e._uU(10,"Usuarios Registrados"),e.qZA(),e.TgZ(11,"section",9)(12,"button",10),e.NdJ("click",function(){return i.chooseListOption("paciente")}),e._UZ(13,"img",11),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){return i.chooseListOption("especialista")}),e._UZ(15,"img",13),e.qZA(),e.TgZ(16,"button",14),e.NdJ("click",function(){return i.chooseListOption("admin")}),e._UZ(17,"img",15),e.qZA()(),e.TgZ(18,"div",16)(19,"button",17),e.NdJ("click",function(){return i.downloadUsersAsExcel()}),e._uU(20,"Descargar Todos "),e._UZ(21,"img",18),e.qZA(),e.TgZ(22,"button",17),e.NdJ("click",function(){return i.selectUserToDownload()}),e._uU(23,"Descargar Turnos "),e._UZ(24,"img",18),e.qZA()()()(),e.TgZ(25,"app-users-table",19),e.NdJ("eventShowTable",function(d){return i.handlerUpdateView(d)})("eventSendUser",function(d){return i.handleSelectUser(d)}),e.qZA()(),e.TgZ(26,"section",5)(27,"div",6)(28,"div",7)(29,"h1",8),e._uU(30,"Alta Usuarios"),e.qZA(),e.TgZ(31,"section",9)(32,"div",20)(33,"input",21),e.NdJ("click",function(){return i.activateCreateUsers()}),e.qZA()()(),e.TgZ(34,"div",22)(35,"div",23)(36,"div",20)(37,"button",24),e.NdJ("click",function(){return i.return()}),e._uU(38,"Salir del Alta"),e.qZA()(),e._UZ(39,"app-register"),e.qZA()()()()(),e.TgZ(40,"section",0)(41,"div",25)(42,"button",2),e.NdJ("click",function(){return i.returnToMain()}),e._UZ(43,"i",3),e._uU(44,"Volver"),e.qZA(),e.TgZ(45,"h1",26),e._uU(46,"Selecciona a un usuario para descargar sus turnos:"),e.qZA(),e.TgZ(47,"div",27),e.YNc(48,K,2,1,"div",28),e.qZA()()()),2&s&&(e.Q6J("hidden",i.hiddenHistory),e.xp6(5),e.Q6J("selectedUser",i.selectedUser),e.xp6(1),e.Q6J("hidden",i.hiddenMain)("@slideInDown",void 0),e.xp6(5),e.Q6J("hidden",!i.showTable),e.xp6(14),e.Q6J("list",i.listFiltered)("showTable",i.showTable)("roleOption",i.listChoseOption),e.xp6(1),e.Q6J("hidden",i.hiddenMain)("@slideInDown",void 0),e.xp6(5),e.Q6J("hidden",i.showCreateUsers),e.xp6(3),e.Q6J("hidden",!i.showCreateUsers),e.xp6(6),e.Q6J("hidden",i.hiddenUsers),e.xp6(8),e.Q6J("ngForOf",i.userService.users))},dependencies:[a.sg,a.O5,b.y,T.u,W],styles:[".text-shadow[_ngcontent-%COMP%]{cursor:pointer;background-color:#f5f5f5;opacity:75%;padding:.3rem;border-radius:1rem;font-weight:700}.boton[_ngcontent-%COMP%]{background-color:#bae7f7}.boton[_ngcontent-%COMP%]:hover{background-color:#4801fd;box-shadow:0 0 20px #6100c8cc}.boton2[_ngcontent-%COMP%]{background-color:#6ac35a;border:2px solid black}.boton2[_ngcontent-%COMP%]:hover{background-color:#02510f;box-shadow:0 0 20px #338a01cc;color:#fff}.botonFab[_ngcontent-%COMP%]{border:0px;border-radius:100%;background-color:#71d4f8;box-shadow:4px 4px 8px #00000080}.botonFab[_ngcontent-%COMP%]:hover{background-color:#363699;color:#fff;box-shadow:6px 6px 12px #000000bf}#botones[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"],data:{animation:[V]}})}return t})()}];let G=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(z),u.Bz]})}return t})();var X=r(8147),ee=r(103),te=r(6710);let ne=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[a.ez,G,X.RegisterModule,p.ef,ee.D,te.H]})}return t})()}}]);