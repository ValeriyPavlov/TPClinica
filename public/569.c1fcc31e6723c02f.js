"use strict";(self.webpackChunkTPClinica=self.webpackChunkTPClinica||[]).push([[569,84],{7569:(K,R,f)=>{f.r(R),f.d(R,{ReportsModule:()=>Tt});var x=f(6814),P=f(6024),D=f(5861),h=f(8133),T=f(9412),I=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),S_textSize=function(e,i,t){var l,a=[].concat(i),r=a.length,n=e.font,s=0;for(e.font=t.string,l=0;l<r;++l)s=Math.max(e.measureText(a[l]).width,s);return e.font=n,{height:r*t.lineHeight,width:s}};function k(e,i){var t=i.x,a=i.y;if(null===t)return{x:0,y:-1};if(null===a)return{x:1,y:0};var r=e.x-t,n=e.y-a,s=Math.sqrt(r*r+n*n);return{x:s?r/s:0,y:s?n/s:-1}}var A=0,$=1,y=2,E=4,_=8;function v(e,i,t){var a=A;return e<t.left?a|=$:e>t.right&&(a|=y),i<t.top?a|=_:i>t.bottom&&(a|=E),a}function m(e,i){var r,n,t=i.anchor,a=e;return i.clamp&&(a=function b(e,i){for(var u,d,c,t=e.x0,a=e.y0,r=e.x1,n=e.y1,s=v(t,a,i),l=v(r,n,i);s|l&&!(s&l);)(u=s||l)&_?(d=t+(r-t)*(i.top-a)/(n-a),c=i.top):u&E?(d=t+(r-t)*(i.bottom-a)/(n-a),c=i.bottom):u&y?(c=a+(n-a)*(i.right-t)/(r-t),d=i.right):u&$&&(c=a+(n-a)*(i.left-t)/(r-t),d=i.left),u===s?s=v(t=d,a=c,i):l=v(r=d,n=c,i);return{x0:t,x1:r,y0:a,y1:n}}(a,i.area)),"start"===t?(r=a.x0,n=a.y0):"end"===t?(r=a.x1,n=a.y1):(r=(a.x0+a.x1)/2,n=(a.y0+a.y1)/2),function L(e,i,t,a,r){switch(r){case"center":t=a=0;break;case"bottom":t=0,a=1;break;case"right":t=1,a=0;break;case"left":t=-1,a=0;break;case"top":t=0,a=-1;break;case"start":t=-t,a=-a;break;case"end":break;default:r*=Math.PI/180,t=Math.cos(r),a=Math.sin(r)}return{x:e,y:i,vx:t,vy:a}}(r,n,e.vx,e.vy,i.align)}var M={arc:function(e,i){var t=(e.startAngle+e.endAngle)/2,a=Math.cos(t),r=Math.sin(t),n=e.innerRadius,s=e.outerRadius;return m({x0:e.x+a*n,y0:e.y+r*n,x1:e.x+a*s,y1:e.y+r*s,vx:a,vy:r},i)},point:function(e,i){var t=k(e,i.origin),a=t.x*e.options.radius,r=t.y*e.options.radius;return m({x0:e.x-a,y0:e.y-r,x1:e.x+a,y1:e.y+r,vx:t.x,vy:t.y},i)},bar:function(e,i){var t=k(e,i.origin),a=e.x,r=e.y,n=0,s=0;return e.horizontal?(a=Math.min(e.x,e.base),n=Math.abs(e.base-e.x)):(r=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),m({x0:a,y0:r+s,x1:a+n,y1:r,vx:t.x,vy:t.y},i)},fallback:function(e,i){var t=k(e,i.origin);return m({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},i)}},C=function(e){return Math.round(e*I)/I};function rt(e,i){var t=i.chart.getDatasetMeta(i.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var a=t.getBasePixel();return e.horizontal?{x:a,y:null}:{x:null,y:a}}function it(e){return e instanceof T.qi?M.arc:e instanceof T.od?M.point:e instanceof T.ZL?M.bar:M.fallback}function lt(e,i,t){var a=e.shadowBlur,r=t.stroked,n=C(t.x),s=C(t.y),l=C(t.w);r&&e.strokeText(i,n,s,l),t.filled&&(a&&r&&(e.shadowBlur=0),e.fillText(i,n,s,l),a&&r&&(e.shadowBlur=a))}var H=function(e,i,t,a){var r=this;r._config=e,r._index=a,r._model=null,r._rects=null,r._ctx=i,r._el=t};(0,h.V)(H.prototype,{_modelize:function(e,i,t,a){var r=this,n=r._index,s=(0,h.O)((0,h.a)([t.font,{}],a,n)),l=(0,h.a)([t.color,T.ce.color],a,n);return{align:(0,h.a)([t.align,"center"],a,n),anchor:(0,h.a)([t.anchor,"center"],a,n),area:a.chart.chartArea,backgroundColor:(0,h.a)([t.backgroundColor,null],a,n),borderColor:(0,h.a)([t.borderColor,null],a,n),borderRadius:(0,h.a)([t.borderRadius,0],a,n),borderWidth:(0,h.a)([t.borderWidth,0],a,n),clamp:(0,h.a)([t.clamp,!1],a,n),clip:(0,h.a)([t.clip,!1],a,n),color:l,display:e,font:s,lines:i,offset:(0,h.a)([t.offset,4],a,n),opacity:(0,h.a)([t.opacity,1],a,n),origin:rt(r._el,a),padding:(0,h.K)((0,h.a)([t.padding,4],a,n)),positioner:it(r._el),rotation:(0,h.a)([t.rotation,0],a,n)*(Math.PI/180),size:S_textSize(r._ctx,i,s),textAlign:(0,h.a)([t.textAlign,"start"],a,n),textShadowBlur:(0,h.a)([t.textShadowBlur,0],a,n),textShadowColor:(0,h.a)([t.textShadowColor,l],a,n),textStrokeColor:(0,h.a)([t.textStrokeColor,l],a,n),textStrokeWidth:(0,h.a)([t.textStrokeWidth,0],a,n)}},update:function(e){var s,l,u,i=this,t=null,a=null,r=i._index,n=i._config,d=(0,h.a)([n.display,!0],e,r);d&&(l=(0,h.v)((0,h.C)(n.formatter,[s=e.dataset.data[r],e]),s),(u=(0,h.k)(l)?[]:function(e){var t,i=[];for(e=[].concat(e);e.length;)"string"==typeof(t=e.pop())?i.unshift.apply(i,t.split("\n")):Array.isArray(t)?e.push.apply(e,t):(0,h.k)(e)||i.unshift(""+t);return i}(l)).length&&(a=function at(e){var i=e.borderWidth||0,t=e.padding,a=e.size.height,r=e.size.width,n=-r/2,s=-a/2;return{frame:{x:n-t.left-i,y:s-t.top-i,w:r+t.width+2*i,h:a+t.height+2*i},text:{x:n,y:s,w:r,h:a}}}(t=i._modelize(d,u,n,e)))),i._model=t,i._rects=a},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,i){var s,a=e.ctx,r=this._model,n=this._rects;this.visible()&&(a.save(),r.clip&&(s=r.area,a.beginPath(),a.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),a.clip()),a.globalAlpha=function(e,i,t){return Math.max(e,Math.min(i,t))}(0,r.opacity,1),a.translate(C(i.x),C(i.y)),a.rotate(r.rotation),function st(e,i,t){var a=t.backgroundColor,r=t.borderColor,n=t.borderWidth;!a&&(!r||!n)||(e.beginPath(),function nt(e,i,t,a,r,n){var s=Math.PI/2;if(n){var l=Math.min(n,r/2,a/2),u=i+l,d=t+l,c=i+a-l,p=t+r-l;e.moveTo(i,d),u<c&&d<p?(e.arc(u,d,l,-Math.PI,-s),e.arc(c,d,l,-s,0),e.arc(c,p,l,0,s),e.arc(u,p,l,s,Math.PI)):u<c?(e.moveTo(u,t),e.arc(c,d,l,-s,s),e.arc(u,d,l,s,Math.PI+s)):d<p?(e.arc(u,d,l,-Math.PI,0),e.arc(u,p,l,0,Math.PI)):e.arc(u,d,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(i,t)}else e.rect(i,t,a,r)}(e,C(i.x)+n/2,C(i.y)+n/2,C(i.w)-n,C(i.h)-n,t.borderRadius),e.closePath(),a&&(e.fillStyle=a,e.fill()),r&&n&&(e.strokeStyle=r,e.lineWidth=n,e.lineJoin="miter",e.stroke()))}(a,n.frame,r),function dt(e,i,t,a){var w,r=a.textAlign,n=a.color,s=!!n,l=a.font,u=i.length,d=a.textStrokeColor,c=a.textStrokeWidth,p=d&&c;if(u&&(s||p))for(t=function ot(e,i,t){var a=t.lineHeight,r=e.w,n=e.x;return"center"===i?n+=r/2:("end"===i||"right"===i)&&(n+=r),{h:a,w:r,x:n,y:e.y+a/2}}(t,r,l),e.font=l.string,e.textAlign=r,e.textBaseline="middle",e.shadowBlur=a.textShadowBlur,e.shadowColor=a.textShadowColor,s&&(e.fillStyle=n),p&&(e.lineJoin="round",e.lineWidth=c,e.strokeStyle=d),w=0,u=i.length;w<u;++w)lt(e,i[w],{stroked:p,filled:s,w:t.w,x:t.x,y:t.y+t.h*w})}(a,r.lines,n.text,r),a.restore())}});var ut=Number.MIN_SAFE_INTEGER||-9007199254740991,ht=Number.MAX_SAFE_INTEGER||9007199254740991;function U(e,i,t){var a=Math.cos(t),r=Math.sin(t),n=i.x,s=i.y;return{x:n+a*(e.x-n)-r*(e.y-s),y:s+r*(e.x-n)+a*(e.y-s)}}function Q(e,i){var n,s,d,t=ht,a=ut,r=i.origin;for(n=0;n<e.length;++n)d=i.vx*((s=e[n]).x-r.x)+i.vy*(s.y-r.y),t=Math.min(t,d),a=Math.max(a,d);return{min:t,max:a}}function N(e,i){var t=i.x-e.x,a=i.y-e.y,r=Math.sqrt(t*t+a*a);return{vx:(i.x-e.x)/r,vy:(i.y-e.y)/r,origin:e,ln:r}}var Y=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function V(e,i,t){var a=i.positioner(e,i),r=a.vx,n=a.vy;if(!r&&!n)return{x:a.x,y:a.y};var s=t.w,l=t.h,u=i.rotation,d=Math.abs(s/2*Math.cos(u))+Math.abs(l/2*Math.sin(u)),c=Math.abs(s/2*Math.sin(u))+Math.abs(l/2*Math.cos(u)),p=1/Math.max(Math.abs(r),Math.abs(n));return d*=r*p,c*=n*p,{x:a.x+(d+=i.offset*r),y:a.y+(c+=i.offset*n)}}(0,h.V)(Y.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,i,t){this._rotation=t,this._rect={x:i.x+e.x,y:i.y+e.y,w:i.w,h:i.h}},contains:function(e){var i=this,a=i._rect;return!((e=U(e,i.center(),-i._rotation)).x<a.x-1||e.y<a.y-1||e.x>a.x+a.w+2||e.y>a.y+a.h+2)},intersects:function(e){var r,n,s,i=this._points(),t=e._points(),a=[N(i[0],i[1]),N(i[0],i[3])];for(this._rotation!==e._rotation&&a.push(N(t[0],t[1]),N(t[0],t[3])),r=0;r<a.length;++r)if(n=Q(i,a[r]),s=Q(t,a[r]),n.max<s.min||s.max<n.min)return!1;return!0},_points:function(){var e=this,i=e._rect,t=e._rotation,a=e.center();return[U({x:i.x,y:i.y},a,t),U({x:i.x+i.w,y:i.y},a,t),U({x:i.x+i.w,y:i.y+i.h},a,t),U({x:i.x,y:i.y+i.h},a,t)]}});var B={prepare:function(e){var t,a,r,n,s,i=[];for(t=0,r=e.length;t<r;++t)for(a=0,n=e[t].length;a<n;++a)i.push(s=e[t][a]),s.$layout={_box:new Y,_hidable:!1,_visible:!0,_set:t,_idx:s._index};return i.sort(function(l,u){var d=l.$layout,c=u.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(i),i},update:function(e){var t,a,r,n,s,i=!1;for(t=0,a=e.length;t<a;++t)n=(r=e[t]).model(),(s=r.$layout)._hidable=n&&"auto"===n.display,s._visible=r.visible(),i|=s._hidable;i&&function ft(e){var i,t,a,r,n,s,l;for(i=0,t=e.length;i<t;++i)(r=(a=e[i]).$layout)._visible&&(l=new Proxy(a._el,{get:(u,d)=>u.getProps([d],!0)[d]}),n=a.geometry(),s=V(l,a.model(),n),r._box.update(s,n,a.rotation()));(function ct(e,i){var t,a,r,n;for(t=e.length-1;t>=0;--t)for(r=e[t].$layout,a=t-1;a>=0&&r._visible;--a)(n=e[a].$layout)._visible&&r._box.intersects(n._box)&&i(r,n)})(e,function(u,d){var c=u._hidable,p=d._hidable;c&&p||p?d._visible=!1:c&&(u._visible=!1)})}(e)},lookup:function(e,i){var t,a;for(t=e.length-1;t>=0;--t)if((a=e[t].$layout)&&a._visible&&a._box.contains(i))return e[t];return null},draw:function(e,i){var t,a,r,n,s,l;for(t=0,a=i.length;t<a;++t)(n=(r=i[t]).$layout)._visible&&(s=r.geometry(),l=V(r._el,r.model(),s),n._box.update(l,s,r.rotation()),r.draw(e,l))}},g="$datalabels",X="$default";function W(e,i,t,a){if(i){var s,r=t.$context,n=t.$groups;i[n._set]&&(s=i[n._set][n._key])&&!0===(0,h.C)(s,[r,a])&&(e[g]._dirty=!0,t.update(r))}}var z={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if((0,h.k)(e))return null;var t,a,r,i=e;if((0,h.i)(e))if((0,h.k)(e.label))if((0,h.k)(e.r))for(i="",r=0,a=(t=Object.keys(e)).length;r<a;++r)i+=(0!==r?", ":"")+t[r]+": "+e[t[r]];else i=e.r;else i=e.label;return""+i},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(e){e[g]={_actives:[]}},beforeUpdate:function(e){var i=e[g];i._listened=!1,i._listeners={},i._datasets=[],i._labels=[]},afterDatasetUpdate:function(e,i,t){var p,w,q,tt,j,et,Z,O,a=i.index,r=e[g],n=r._datasets[a]=[],s=e.isDatasetVisible(a),l=e.data.datasets[a],u=function yt(e,i){var n,s,t=e.datalabels,a={},r=[];return!1===t?null:(!0===t&&(t={}),i=(0,h.V)({},[i,t]),n=i.labels||{},s=Object.keys(n),delete i.labels,s.length?s.forEach(function(l){n[l]&&r.push((0,h.V)({},[i,n[l],{_key:l}]))}):r.push(i),a=r.reduce(function(l,u){return(0,h.Q)(u.listeners||{},function(d,c){l[c]=l[c]||{},l[c][u._key||X]=d}),delete u.listeners,l},{}),{labels:r,listeners:a})}(l,t),d=i.meta.data||[],c=e.ctx;for(c.save(),p=0,q=d.length;p<q;++p)if((Z=d[p])[g]=[],s&&Z&&e.getDataVisibility(p)&&!Z.skip)for(w=0,tt=u.labels.length;w<tt;++w)et=(j=u.labels[w])._key,(O=new H(j,c,Z,p)).$groups={_set:a,_key:et||X},O.$context={active:!1,chart:e,dataIndex:p,dataset:l,datasetIndex:a},O.update(O.$context),Z[g].push(O),n.push(O);c.restore(),(0,h.V)(r._listeners,u.listeners,{merger:function(F,G,St){G[F]=G[F]||{},G[F][i.index]=St[F],r._listened=!0}})},afterUpdate:function(e){e[g]._labels=B.prepare(e[g]._datasets)},afterDatasetsDraw:function(e){B.draw(e,e[g]._labels)},beforeEvent:function(e,i){if(e[g]._listened){var t=i.event;switch(t.type){case"mousemove":case"mouseout":!function bt(e,i){var r,n,t=e[g],a=t._listeners;if(a.enter||a.leave){if("mousemove"===i.type)n=B.lookup(t._labels,i);else if("mouseout"!==i.type)return;r=t._hovered,t._hovered=n,function _t(e,i,t,a,r){var n,s;!t&&!a||(t?a?t!==a&&(s=n=!0):s=!0:n=!0,s&&W(e,i.leave,t,r),n&&W(e,i.enter,a,r))}(e,a,r,n,i)}}(e,t);break;case"click":!function mt(e,i){var t=e[g],a=t._listeners.click,r=a&&B.lookup(t._labels,i);r&&W(e,a,r,i)}(e,t)}}},afterEvent:function(e){var n,s,l,u,d,c,p,i=e[g],r=function(e,i){var r,n,s,l,t=e.slice(),a=[];for(r=0,s=i.length;r<s;++r)-1===(n=t.indexOf(l=i[r]))?a.push([l,1]):t.splice(n,1);for(r=0,s=t.length;r<s;++r)a.push([t[r],-1]);return a}(i._actives,i._actives=e.getActiveElements());for(n=0,s=r.length;n<s;++n)if((d=r[n])[1])for(l=0,u=(p=d[0].element[g]||[]).length;l<u;++l)(c=p[l]).$context.active=1===d[1],c.update(c.$context);(i._dirty||r.length)&&(B.update(i._labels),e.render()),delete i._dirty}},J=f(7246),o=f(9468),gt=f(5710),xt=f(6084),Ct=f(2553);function Et(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",11)(1,"div",4)(2,"h4"),o._uU(3,"B.- Cantidad de Turnos por Especialidad:"),o.qZA(),o.TgZ(4,"button",5),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.downloadChart("B","Cantidad de Turnos por Especialidad:"))}),o._uU(5,"Descargar "),o._UZ(6,"img",6),o.qZA()(),o._UZ(7,"canvas",12),o.qZA()}if(2&e){const t=o.oxw();o.xp6(7),o.Q6J("data",t.pieChartData)("type",t.pieChartType)("options",t.pieChartOptions)("plugins",t.pieChartPlugins)}}function Mt(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",13)(1,"div",4)(2,"h4"),o._uU(3,"C.- Cantidad de Turnos por Dia:"),o.qZA(),o.TgZ(4,"button",5),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.downloadChart("C","Cantidad de Turnos por Dia:"))}),o._uU(5,"Descargar "),o._UZ(6,"img",6),o.qZA()(),o._UZ(7,"canvas",14),o.qZA()}if(2&e){const t=o.oxw();o.xp6(7),o.Q6J("data",t.barChartData)("type",t.barChartType)("options",t.barChartOptions)("plugins",t.barChartPlugins)}}function Dt(e,i){if(1&e){const t=o.EpF();o.TgZ(0,"div",15)(1,"div",16)(2,"div",4)(3,"h4"),o._uU(4,"D.- Cantidad de Turnos solicitados por Especialista:"),o.qZA(),o.TgZ(5,"button",5),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.downloadChart("D","Cantidad de Turnos solicitados por Especialista:"))}),o._uU(6,"Descargar "),o._UZ(7,"img",6),o.qZA()(),o._UZ(8,"canvas",17),o.qZA(),o.TgZ(9,"div",13)(10,"div",4)(11,"h4"),o._uU(12,"E.- Cantidad de Turnos finalizados por Especialista:"),o.qZA(),o.TgZ(13,"button",5),o.NdJ("click",function(){o.CHM(t);const r=o.oxw();return o.KtG(r.downloadChart("E","Cantidad de Turnos finalizados por Especialista:"))}),o._uU(14,"Descargar "),o._UZ(15,"img",6),o.qZA()(),o._UZ(16,"canvas",18),o.qZA()()}if(2&e){const t=o.oxw();o.xp6(8),o.Q6J("data",t.lineChartData)("options",t.lineChartOptions)("type",t.lineChartType),o.xp6(8),o.Q6J("data",t.lineChartData2)("options",t.lineChartOptions)("type",t.lineChartType)}}const wt=[{path:"",component:(()=>{class e{constructor(t,a,r){this.appService=t,this.specService=a,this.logService=r,this.allSpecialitys=[],this.specialityLabels=[],this.specialityAppointments=[],this.daysBarChart=[],this.lineAppointmentList=[],this.logs=[],this.uniqueDates=[],this.lineChartType="line",this.barChartType="bar",this.pieChartType="pie",this.scatterChartType="scatter",this.bubbleChartType="bubble",this.barChartPlugins=[z],this.pieChartPlugins=[z],this.scatterChartPlugins=[z],this.bubbleChartOptions={plugins:{datalabels:{display:!1}},scales:{x:{min:1,max:30,ticks:{},title:{display:!0,text:"Dia",font:{size:12}}},y:{min:0,max:24,ticks:{},title:{display:!0,text:"Hora",font:{size:12}}}}},this.pieChartOptions={responsive:!0,plugins:{legend:{display:!0,position:"top"},datalabels:{formatter:(n,s)=>0===n?"":s.chart.data.labels[s.dataIndex]}}},this.pieChartData={labels:this.specialityLabels,datasets:[{data:this.specialityAppointments}]},this.barChartOptions={responsive:!0,scales:{x:{},y:{min:0,max:10}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end"}}},this.lineChartOptions={elements:{line:{tension:.5}},scales:{y:{min:0,position:"left"}},plugins:{legend:{display:!0}}},this.showGraph2=!1,this.appService.getAppointments(),this.getSpecialitys(),this.getLogs()}getSpecialitys(){var t=this;return(0,D.Z)(function*(){t.allSpecialitys=yield t.specService.getAllSpecialities(),t.allSpecialitys.forEach(a=>{t.specialityLabels.push(a.description),t.specialityAppointments.push(0)}),t.appService.appointments.forEach(a=>{let r=t.specialityLabels.indexOf(a.speciality);-1!=r&&(t.specialityAppointments[r]+=1)}),t.showGraph2=!0,t.getDaysForBarChart(),t.lineChartData=t.getLineData(),t.lineChartData2=t.getLineData(2)})()}getLogs(){var t=this;return(0,D.Z)(function*(){t.logs=yield t.logService.getAllLogs(),t.logs=t.logs.sort((a,r)=>r.date!==a.date?new Date(parseInt(a.date.substring(6)),parseInt(a.date.substring(3,5)),parseInt(a.date.substring(0,2)))>new Date(parseInt(r.date.substring(6)),parseInt(r.date.substring(3,5)),parseInt(r.date.substring(0,2)))?1:-1:parseFloat(a.time.split(":")[0])!=parseFloat(r.time.split(":")[0])?parseFloat(a.time.split(":")[0])>parseFloat(r.time.split(":")[0])?1:-1:0),t.bubbleChartData=t.getBubbleChartData()})()}getBubbleChartData(){let t=[],a=[];return this.logs.forEach(n=>{t.some(s=>s===n.date)||t.push(n.date),a.some(s=>s.label===`${n.user.lastName}, ${n.user.name}`)||a.push({data:[],label:`${n.user.lastName}, ${n.user.name}`})}),this.logs.forEach(n=>{t.forEach(s=>{a.forEach(l=>{l.label==`${n.user.lastName}, ${n.user.name}`&&s==n.date&&l.data.push({y:n.time.split(":")[0],x:n.date.split("/")[0],r:10})})})}),{labels:t,datasets:a}}getDaysForBarChart(){const t=[0,0,0,0,0,0];this.appService.appointments.forEach(a=>{switch(a.day.dayOfWeek){case"lunes":t[0]+=1;break;case"martes":t[1]+=1;break;case"mi\xe9rcoles":t[2]+=1;break;case"jueves":t[3]+=1;break;case"viernes":t[4]+=1;break;case"s\xe1bado":t[5]+=1}}),this.barChartData={labels:["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],datasets:[{data:t,label:"Cantidad de Turnos"}]}}getLineData(t=1){this.lineAppointmentList=this.appService.appointments.sort((s,l)=>l.day.date!==s.day.date?new Date(parseInt(s.day.date.substring(6)),parseInt(s.day.date.substring(3,5)),parseInt(s.day.date.substring(0,2)))>new Date(parseInt(l.day.date.substring(6)),parseInt(l.day.date.substring(3,5)),parseInt(l.day.date.substring(0,2)))?1:-1:parseFloat(s.day.timeStart)!=parseFloat(l.day.timeStart)?parseFloat(s.day.timeStart)>parseFloat(l.day.timeStart)?1:-1:0);let a=[],r=[];return this.lineAppointmentList.forEach(s=>{a.some(l=>l===s.day.date)||a.push(s.day.date),r.some(l=>l.label===`${s.specialist.lastName}, ${s.specialist.name}`)||r.push({data:[],label:`${s.specialist.lastName}, ${s.specialist.name}`})}),a.forEach(1==t?s=>{r.forEach(l=>{let u=this.lineAppointmentList.filter(d=>d.day.date==s&&`${d.specialist.lastName}, ${d.specialist.name}`==l.label);l.data.push(u.length)})}:s=>{r.forEach(l=>{let u=this.lineAppointmentList.filter(d=>d.day.date==s&&`${d.specialist.lastName}, ${d.specialist.name}`==l.label&&"Realizado"==d.state);l.data.push(u.length)})}),{labels:a,datasets:r}}downloadChart(t,a){var r=this;return(0,D.Z)(function*(){if(""!=t&&""!=a){const n=document.getElementById(t);r.logService.createPdf(n,a)}})()}static#t=this.\u0275fac=function(a){return new(a||e)(o.Y36(gt.H),o.Y36(xt.d),o.Y36(Ct.$))};static#e=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-reports"]],viewQuery:function(a,r){if(1&a&&o.Gf(J.jh,5),2&a){let n;o.iGM(n=o.CRH())&&(r.chart=n.first)}},decls:16,vars:7,consts:[[1,"bg-beige","card",2,"margin","0","padding","0"],[1,"text-center","m-1","p-2"],[1,"d-flex","flex-row","justify-content-center","p-3","m-3","card"],[2,"width","35vw","height","50vh"],[1,"d-flex","flex-row","justify-content-center","align-items-center"],[1,"btn","boton","btn-warning","m-3",3,"click"],["src","../../../assets/img/pdf.png","alt","pdf",2,"height","40px","width","40px"],["baseChart","","id","A",1,"chart",3,"data","options","legend","type"],["style","margin-bottom: 20px; size: 35%;",4,"ngIf"],["style","width: 35vw; height: 35vh; margin-left:10%;",4,"ngIf"],["class","d-flex flex-row justify-content-center p-3 m-3 card","style","height: 54vh; padding-bottom: 20px;",4,"ngIf"],[2,"margin-bottom","20px","size","35%"],["baseChart","","id","B",1,"chart",3,"data","type","options","plugins"],[2,"width","35vw","height","35vh","margin-left","10%"],["baseChart","","id","C",1,"chart",3,"data","type","options","plugins"],[1,"d-flex","flex-row","justify-content-center","p-3","m-3","card",2,"height","54vh","padding-bottom","20px"],[2,"width","35vw","height","35vh"],["baseChart","","id","D",1,"chart",3,"data","options","type"],["baseChart","","id","E",1,"chart",3,"data","options","type"]],template:function(a,r){1&a&&(o.TgZ(0,"div",0)(1,"h1",1),o._uU(2,"Informes:"),o.qZA(),o.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"h4"),o._uU(7,"A.- Ingresos al sistema:"),o.qZA(),o.TgZ(8,"button",5),o.NdJ("click",function(){return r.downloadChart("A","Ingresos al sistema:")}),o._uU(9,"Descargar "),o._UZ(10,"img",6),o.qZA()(),o._UZ(11,"canvas",7),o.qZA()(),o.TgZ(12,"div",2),o.YNc(13,Et,8,4,"div",8),o.YNc(14,Mt,8,4,"div",9),o.qZA(),o.YNc(15,Dt,17,6,"div",10),o.qZA()),2&a&&(o.xp6(11),o.Q6J("data",r.bubbleChartData)("options",r.bubbleChartOptions)("legend",!1)("type",r.bubbleChartType),o.xp6(2),o.Q6J("ngIf",r.showGraph2),o.xp6(1),o.Q6J("ngIf",null!=r.barChartData),o.xp6(1),o.Q6J("ngIf",null!=r.lineChartData))},dependencies:[x.O5,J.jh],styles:[".boton[_ngcontent-%COMP%]{background-color:#b9f4fd;border:2px solid black;width:160px}.boton[_ngcontent-%COMP%]:hover{background-color:#03a1fc;color:#fff}.bg-beige[_ngcontent-%COMP%]{background-color:beige;padding:0;margin:0}"]})}return e})()}];let Pt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=o.oAB({type:e});static#a=this.\u0275inj=o.cJS({imports:[P.Bz.forChild(wt),P.Bz]})}return e})(),Tt=(()=>{class e{static#t=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=o.oAB({type:e});static#a=this.\u0275inj=o.cJS({imports:[x.ez,Pt,J.vQ]})}return e})()},5710:(K,R,f)=>{f.d(R,{H:()=>S});var x=f(5861),P=f(15),D=f(3182),h=f(9413),T=f(9468),I=f(3384);let S=(()=>{class A{constructor(y){this.firebaseStoreProvider=y,this.appointments=[]}getAllAppointments(){return this.firebaseStoreProvider.getCollection("turnos")}getAppointments(){var y=this;return(0,x.Z)(function*(){const E=(0,P.IO)((0,P.hJ)(L,"turnos"));(0,P.cf)(E,_=>(y.appointments=[],_.forEach(function(){var v=(0,x.Z)(function*(b){var m=b.data();y.appointments.push({...m})});return function(b){return v.apply(this,arguments)}}()),y.appointments))})()}saveAppointmentWithIdInStore(y,E){return this.firebaseStoreProvider.setDocWithId("turnos",y,JSON.parse(JSON.stringify(E)))}saveAppointmenInStore(y){const E=this.firebaseStoreProvider.createDoc("turnos");return y.id=E.id,this.firebaseStoreProvider.saveDoc(E,JSON.parse(JSON.stringify(y)))}static#t=this.\u0275fac=function(E){return new(E||A)(T.LFG(I.f))};static#e=this.\u0275prov=T.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})();const k=(0,D.ZF)(h.N.firebaseConfig),L=(0,P.ad)(k)},6084:(K,R,f)=>{f.d(R,{d:()=>L});var x=f(5861),P=f(4036),D=f(15),h=f(3182),T=f(9413),I=f(9468),S=f(3384),k=f(388);let L=(()=>{class y{constructor(_,v){this.firebaseStoreProvider=_,this.firebaseStorageProvider=v,this.specialitys=[]}getAllSpecialities(){var _=this;return(0,x.Z)(function*(){let v=yield(0,P.z)(_.firebaseStoreProvider.getCollection("specialities"));return v=yield Promise.all(v.map(function(){var b=(0,x.Z)(function*(m){return{...m,image:yield _.getSpecialityPhoto(m)}});return function(m){return b.apply(this,arguments)}}())),v})()}getSpecialities(){var _=this;return(0,x.Z)(function*(){const v=(0,D.IO)((0,D.hJ)($,"specialities"));(0,D.cf)(v,b=>(_.specialitys=[],b.forEach(function(){var m=(0,x.Z)(function*(M){var C=M.data();_.specialitys.push({...C,image:yield _.getSpecialityPhoto(C)})});return function(M){return m.apply(this,arguments)}}()),_.specialitys))})()}addSpeciality(_){var v=this;return(0,x.Z)(function*(){let b=!1;if((yield v.getAllSpecialities()).forEach(M=>{M.description==_.description&&(b=!0)}),!b){const M=v.firebaseStoreProvider.createDoc("specialities");return v.firebaseStoreProvider.saveDoc(M,JSON.parse(JSON.stringify(_)))}})()}getSpecialityPhoto(_){var v=this;return(0,x.Z)(function*(){try{const b=v.firebaseStorageProvider.referenceCloudStorage(_.image);return yield v.firebaseStorageProvider.getUrlFromFile(b)}catch{}})()}static#t=this.\u0275fac=function(v){return new(v||y)(I.LFG(S.f),I.LFG(k.O))};static#e=this.\u0275prov=I.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const A=(0,h.ZF)(T.N.firebaseConfig),$=(0,D.ad)(A)}}]);