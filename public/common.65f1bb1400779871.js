"use strict";(self.webpackChunkTPClinica=self.webpackChunkTPClinica||[]).push([[592],{8642:(g,_,t)=>{t.d(_,{u:()=>O});var l=t(5861),e=t(9468),s=t(5710),p=t(9547),n=t(6084),c=t(6814),u=t(346);function v(o,f){if(1&o&&(e.TgZ(0,"div")(1,"h2",3),e._uU(2),e.qZA()()),2&o){const i=e.oxw();e.xp6(2),e.AsE("Historia Cl\xednica de ",i.selectedUser.lastName,", ",i.selectedUser.name,"")}}function P(o,f){if(1&o){const i=e.EpF();e.TgZ(0,"div")(1,"h2",3),e._uU(2,"Mi Historia Cl\xednica"),e.qZA(),e.TgZ(3,"div",3)(4,"button",4),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.downloadMedicalRecord())}),e._uU(5,"Descargar "),e._UZ(6,"img",5),e.qZA()()()}}function h(o,f){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",12),e._uU(3," Fecha y Hora: "),e.qZA(),e.TgZ(4,"div",13),e._uU(5),e.ALo(6,"hours"),e.ALo(7,"hours"),e.qZA(),e.TgZ(8,"div",14),e._uU(9," Especialista: "),e.qZA(),e.TgZ(10,"div"),e._UZ(11,"img",15),e._uU(12),e.qZA(),e.TgZ(13,"div",14),e._uU(14," Especialidad: "),e.qZA(),e.TgZ(15,"div"),e._UZ(16,"img",16),e._uU(17),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12),e._uU(20," Rese\xf1a: "),e.qZA(),e.TgZ(21,"div",13)(22,"p",17),e._uU(23),e.qZA()(),e.TgZ(24,"div",14),e._uU(25," Diagnostico: "),e.qZA(),e.TgZ(26,"div",13)(27,"h5"),e._uU(28),e.qZA()()()()),2&o){const i=f.$implicit,a=f.index,r=e.oxw(3);e.xp6(5),e.lnq(" ",i.day.date," ",e.lcZ(6,11,i.day.timeStart)," - ",e.lcZ(7,13,i.day.timeEnd),"hs "),e.xp6(6),e.s9C("src",i.specialist.profilePhoto,e.LSH),e.xp6(1),e.AsE(" ",i.specialist.lastName,", ",i.specialist.name," "),e.xp6(4),e.s9C("src",r.getSpecialityPhoto(i.speciality),e.LSH),e.xp6(1),e.hij(" ",i.speciality," "),e.xp6(6),e.Oqu(i.review),e.xp6(4),e.uIk("id","item-"+a),e.xp6(1),e.Oqu(r.getDiagnosis(i,a))}}function T(o,f){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,h,29,15,"div",9),e.qZA()),2&o){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.myAppointments)}}function d(o,f){1&o&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"El paciente seleccionado aun no tiene Historial Clinico."),e.qZA()())}function m(o,f){if(1&o&&(e.TgZ(0,"div",6),e.YNc(1,T,2,1,"div",7),e.YNc(2,d,3,0,"div",1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.myAppointments.length>0),e.xp6(1),e.Q6J("ngIf",0==i.myAppointments.length)}}let O=(()=>{class o{constructor(i,a,r){this.aService=i,this.uService=a,this.sService=r,this.showTable=new e.vpe,this.myAppointments=[],this.listOfSpecialities=[],this.setSpecialities(),this.aService.getAppointments()}ngOnChanges(){this.getMedicalRecord(this.selectedUser)}getMedicalRecord(i){this.myAppointments=this.aService.appointments.filter(a=>a.patient.userId==i.userId&&"Realizado"==a.state),this.myAppointments=this.myAppointments.sort((a,r)=>r.day.date!==a.day.date?new Date(parseInt(a.day.date.substring(6)),parseInt(a.day.date.substring(3,5)),parseInt(a.day.date.substring(0,2)))>new Date(parseInt(r.day.date.substring(6)),parseInt(r.day.date.substring(3,5)),parseInt(r.day.date.substring(0,2)))?1:-1:parseFloat(a.day.timeStart)!=parseFloat(r.day.timeStart)?parseFloat(a.day.timeStart)>parseFloat(r.day.timeStart)?1:-1:0)}return(){this.showTable.emit(!0)}setSpecialities(){var i=this;return(0,l.Z)(function*(){i.listOfSpecialities=yield i.sService.getAllSpecialities()})()}getSpecialityPhoto(i){let a;return this.listOfSpecialities?.forEach(r=>{r.description==i&&(a=r.image)}),a}getDiagnosis(i,a){let r=document.getElementById("item-"+a),y=i.diagnosis,E=`Altura: ${y.height} cm<br>Peso: ${y.weight} kg<br>Temperatura: ${y.temperature} C\xb0<br>Presion: ${y.pressure} mmHg`;y.dynamicData?.forEach(A=>{E+=`<br>${A.key}: ${A.value}`}),r&&(r.innerHTML=E)}downloadMedicalRecord(){this.uService.createPdf(this.myAppointments,this.uService.userLogged)}static#e=this.\u0275fac=function(a){return new(a||o)(e.Y36(s.H),e.Y36(p.K),e.Y36(n.d))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-history"]],inputs:{selectedUser:"selectedUser"},outputs:{showTable:"showTable"},features:[e.TTD],decls:4,vars:3,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","m-3","p-3"],[4,"ngIf"],["class","w-75 m-5 p-2 card bg-beige",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","m-1","p-1"],[1,"btn","boton",3,"click"],["src","../../../assets/img/pdf.png","alt","pdf",2,"height","60px","width","60px"],[1,"w-75","m-5","p-2","card","bg-beige"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column"],["class","card m-1 p-1",4,"ngFor","ngForOf"],[1,"card","m-1","p-1"],[1,"d-flex","flex-row","m-1","p-1"],[1,"titles"],[2,"padding-left","20px"],[1,"titles","padL"],["alt","foto_especialista",2,"height","100px","width","100px",3,"src"],["alt","foto_especialidad",2,"height","100px","width","100px",3,"src"],[1,"texto-limitado"]],template:function(a,r){1&a&&(e.TgZ(0,"div",0),e.YNc(1,v,3,2,"div",1),e.YNc(2,P,7,0,"div",1),e.YNc(3,m,3,2,"div",2),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf","admin"==(null==r.uService.userLogged?null:r.uService.userLogged.userRole)&&r.selectedUser),e.xp6(1),e.Q6J("ngIf","paciente"==(null==r.uService.userLogged?null:r.uService.userLogged.userRole)),e.xp6(1),e.Q6J("ngIf",null!=r.selectedUser))},dependencies:[c.sg,c.O5,u.X],styles:[".bg-beige[_ngcontent-%COMP%]{background-color:beige}.boton[_ngcontent-%COMP%]{border:2px solid black;background-color:#0ff}.boton[_ngcontent-%COMP%]:hover{background-color:#4e4ef1;color:#fff}.texto-limitado[_ngcontent-%COMP%]{overflow:visible;white-space:pre-wrap;text-overflow:clip;width:400px}.titles[_ngcontent-%COMP%]{font-weight:700;text-decoration:underline}.padL[_ngcontent-%COMP%]{padding-left:10%}"]})}return o})()},6710:(g,_,t)=>{t.d(_,{H:()=>p});var l=t(6814),e=t(103),s=t(9468);let p=(()=>{class n{static#e=this.\u0275fac=function(v){return new(v||n)};static#t=this.\u0275mod=s.oAB({type:n});static#i=this.\u0275inj=s.cJS({imports:[l.ez,e.D]})}return n})()},4212:(g,_,t)=>{t.d(_,{x:()=>e});var l=t(9468);let e=(()=>{class s{transform(n,...c){return!0===n?"Si":!1===n?"No":n}static#e=this.\u0275fac=function(c){return new(c||s)};static#t=this.\u0275pipe=l.Yjl({name:"booleans",type:s,pure:!0})}return s})()},346:(g,_,t)=>{t.d(_,{X:()=>e});var l=t(9468);let e=(()=>{class s{transform(n,...c){return parseFloat(n)%1==0?`${n}:00`:`${Math.floor(n)}:30`}static#e=this.\u0275fac=function(c){return new(c||s)};static#t=this.\u0275pipe=l.Yjl({name:"hours",type:s,pure:!0})}return s})()},3175:(g,_,t)=>{t.d(_,{U:()=>e});var l=t(9468);let e=(()=>{class s{transform(n,...c){return[{key:"userId",value:"ID"},{key:"name",value:"Nombre"},{key:"lastName",value:"Apellido"},{key:"age",value:"Edad"},{key:"dni",value:"DNI"},{key:"email",value:"E-mail"},{key:"password",value:"Contrase\xf1a"},{key:"socialWork",value:"Obra Social"},{key:"speciality",value:"Especialidad"},{key:"userRole",value:"Rol"},{key:"profilePhoto",value:"Foto1"},{key:"profilePhotoTwo",value:"Foto2"},{key:"verified",value:"E-mail Verificado"},{key:"verifiedByAdmin",value:"Verificado por Admin"}].find(v=>v.key===n)?.value}static#e=this.\u0275fac=function(c){return new(c||s)};static#t=this.\u0275pipe=l.Yjl({name:"keysToSpanish",type:s,pure:!0})}return s})()},103:(g,_,t)=>{t.d(_,{D:()=>s});var l=t(6814),e=t(9468);let s=(()=>{class p{static#e=this.\u0275fac=function(u){return new(u||p)};static#t=this.\u0275mod=e.oAB({type:p});static#i=this.\u0275inj=e.cJS({imports:[l.ez]})}return p})()},4553:(g,_,t)=>{t.d(_,{t:()=>e});var l=t(9468);let e=(()=>{class s{transform(n,...c){return n.description?n.description:n}static#e=this.\u0275fac=function(c){return new(c||s)};static#t=this.\u0275pipe=l.Yjl({name:"speciality",type:s,pure:!0})}return s})()},5710:(g,_,t)=>{t.d(_,{H:()=>u});var l=t(5861),e=t(15),s=t(3182),p=t(9413),n=t(9468),c=t(3384);let u=(()=>{class h{constructor(d){this.firebaseStoreProvider=d,this.appointments=[]}getAllAppointments(){return this.firebaseStoreProvider.getCollection("turnos")}getAppointments(){var d=this;return(0,l.Z)(function*(){const m=(0,e.IO)((0,e.hJ)(P,"turnos"));(0,e.cf)(m,O=>(d.appointments=[],O.forEach(function(){var o=(0,l.Z)(function*(f){var i=f.data();d.appointments.push({...i})});return function(f){return o.apply(this,arguments)}}()),d.appointments))})()}saveAppointmentWithIdInStore(d,m){return this.firebaseStoreProvider.setDocWithId("turnos",d,JSON.parse(JSON.stringify(m)))}saveAppointmenInStore(d){const m=this.firebaseStoreProvider.createDoc("turnos");return d.id=m.id,this.firebaseStoreProvider.saveDoc(m,JSON.parse(JSON.stringify(d)))}static#e=this.\u0275fac=function(m){return new(m||h)(n.LFG(c.f))};static#t=this.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})();const v=(0,s.ZF)(p.N.firebaseConfig),P=(0,e.ad)(v)}}]);